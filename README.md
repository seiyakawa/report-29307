# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* ...

# テーブル設計

## users テーブル

| Column            | Type   | Options     |
| ----------------- | ------ | ----------- |
| nickname          | string | null: false |
| email             | string | null: false |
| password          | string | null: false |

### Association

- has_many :reports
- has_many :comments

## reports テーブル

| Column      | Type       | Option                        |
| ----------- | ---------- | ----------------------------- |
| date        | date       | null: false                   |
| name        | string     | null: false                   |
| purpose     | text       | null: false                   |
| outcome     | text       | null: false                   |
| action_plan | text       | null: false                   |
| other       | text       |                               |
| user        | references | null: false, foreign_key:true |

### Association

- belongs_to :user
- has_many :comments

## comments テーブル

| Column | Type       | Option                        |
| ------ | ---------- | ----------------------------- |
| text   | text       | null: false                   |
| user   | references | null: false, foreign_key:true |
| report | references | null: false, foreign_key:true |

### Association

- belongs_to :user
- belongs_to :report

# 1アプリケーション名
Cool log

# 2アプリケーション概要
メイン  
- ユーザー登録機能
- レポート投稿機能  
- レポートへのコメント機能  
サブ  
- レポート一覧表示
- レポート詳細表示
- レポート編集
- レポート削除
- マイページ
- 投稿者の投稿一覧表示
- 画像のプレビュー機能

# 3URL
https://report-29307.herokuapp.com/

# 4テスト用アカウント
## basic認証
Username:report
Password:1111ログイン
## ログイン
- 投稿者  
Eメール：toukou@com  
パスワード：abc123  
- コメント  
Eメール：komento@com  
パスワード：123abc  

# 5利用方法
- テスト用アカウント（投稿者）でログインを行う。
- 投稿ボタンをクリックし、項目を記入し投稿を行う。
- ログアウトを行い、テスト用アカウント（コメント）でログインを行う。
- トップページに表示されているレポートをクリックするとコメント投稿フォームがある。
- コメントを投稿するとコメント一覧に投稿内容が表示される。

# 6目指した課題解決
新人営業マンの日報の提出をわかりやすくかつやりやすくしたかった。

# 7洗い出した要件
- ユーザー管理機能
- レポート投稿機能
- レポート一覧表示機能
- レポート詳細機能
- レポート編集機能
- レポート削除機能
- コメント機能
- エラーメッセージ日本語表示機能
- 投稿画像プレビュー機能
- 検索機能

| 機能            | 目的	| 詳細	| ストーリー(ユースケース) |
| -------------- | ---- | ----- | ----------------------------- |
| ユーザー管理機能	|ユーザー毎に情報を管理できるようにする	| 新規登録、ログインボタンが存在し必須項目（ニックネーム、Eメール、パスワード）を入力するとアカウントが作成出来るようにする	| ・トップ画面を開いた際に新規登録とログインボタンが表示されている  ・一度新規登録を行えばアカウントが作成されそれ以降はログインを行う |
| レポート投稿機能	| ユーザーが新たにレポートを投稿できるようにする | ログインしているユーザーは新たにレポートを投稿したい際に投稿画面で必須項目を入力するとレポートを投稿できる	| ・トップ画面に投稿ボタンが表示されておりクリックすると投稿画面に遷移する  ・項目を入力後投稿ボタンをクリックするとトップ画面に遷移し、投稿したレポートが一番上に表示される |
| レポート一覧表示機能 |	ユーザーが投稿したレポートを一覧で確認できるようにする	| ユーザー関係なく投稿されたレポートの全てをトップページで確認できる	| ・トップページに投稿されたレポートが表示されている  ・投稿時間が新しいものほど上に表示する |
| レポート詳細機能	| ユーザーが投稿されたレポートの詳細を確認できるようにする	| 一覧に表示されているレポートの詳細の内容を見たい時にクリックすると内容が表示される	| ・トップページに投稿されているレポートの画像部分をクリックするとレポートの投稿内容が表示される |
| レポート編集機能 |	ユーザーが投稿したレポートの編集を行えるようにする	| 自分が投稿したレポートで変更したい点がある場合編集できるようにする	| ・自分が投稿したレポートの詳細画面に編集ボタンを表示する  ・編集ボタンをクリックすると編集画面に遷移し編集できる |
| レポート削除機能 |	ユーザーが投稿したレポートの削除を行えるようにする	| 自分が投稿したレポートをなくしたい時に削除できるようにする	| ・自分が投稿したレポートの詳細画面に削除ボタンを表示する  ・削除ボタンをクリックすると削除が実行されトップページに遷移する |
| コメント機能	| ユーザーが投稿されたレポートにコメントを投稿できるようにする	| 自分以外のユーザーが投稿されたレポートに対してメッセージを伝えたい時にコメントを出来るようにする	| ・ログインした状態で自分以外が投稿したユーザーの詳細画面を拝見するとコメント投稿フォームが表示される ・コメントの投稿を行うと投稿フォームの下のコメント一覧にコメントが表示される |
| エラーメッセージ日本語表示機能 |	ユーザーがユーザーの登録やレポートの投稿を行う際にスムーズに出来るようにする	| ユーザーの登録やレポートの投稿を行う際に、必須項目の抜け漏れが起きた時に日本語でのエラーメッセージを表示する	| ・登録の抜け漏れが起こることが前提  ・ユーザー登録や商品出品、購入登録の際に、日本語でエラーメッセージを表示する |
| 投稿画像プレビュー機能 | ユーザーがレポートの投稿前に投稿する画像の確認をできるようにする	| レポート投稿画面で、画像を選択した際に画像のプレビューを表示することで選択した画像が自分が選択した物と一致しているか判断しやすくする	| ・投稿したいレポートの画像を選択した際にプレビューを表示する |
| 検索機能	| ユーザーが投稿されたレポートの検索を出来るようにする	| 見たいレポートを探す際に検索バーに閲覧したいレポートの文字を入力することで一致しているレポートを表示する	| ・検索バーに閲覧したい投稿に関する文字を入力すると一致したもののみ表示される |

# 8実装した機能のGIF説明
## 新規登録
ニックネームとEメール、パスワードを入力しSign upボタンをクリックするとアカウントが作成される。
https://gyazo.com/9c9712664e9da6dbda783b318bcf6054

## ログイン
アカウントがすでに作成されたものはEメールとパスワードを入力するとログインできる。
https://gyazo.com/55dd1c20647f041bddb26679c8157691

## 新規投稿
備考以外の項目を入力し投稿ボタンをクリックすると投稿できる。
https://gyazo.com/a4d881b2c6cf1787c3e6ef5b8dd098ae

## コメント
コメントアカウントでログインを行い、別のアカウントから投稿されたレポートの詳細ページに遷移するとコメント投稿フォームが存在するのでテキストを入力すると投稿できる。  
https://gyazo.com/2f0beeced82856460e2eca78164d37b8

## 詳細
投稿されたレポートをクリックすると詳細内容が表示される。
https://gyazo.com/d4802c918a0be4389508babc0088de08

## 編集
自分が投稿したレポートの詳細ページを開くと編集ボタンが存在し、クリックすると編集を行える。
https://gyazo.com/c64613d174fa88781cda0ad3819b42c5

## 削除
自分が投稿したレポートの詳細ページを開くと削除ボタンが存在し、クリックすると削除を行える。
https://gyazo.com/2cf1e2851161ac67a062c7f7c9a5bd80

## エラーメッセージ日本語
ユーザー登録及びレポート投稿を行う際に入力に誤りや不備があると日本語でエラーメッセージが表示される。
https://gyazo.com/22a2a1d95267a35f3a25c45ed82f87cf
https://gyazo.com/bf3dee3afd1d23aeddac4f04f0f08f75

## プレビュー画像
レポートを投稿する際に投稿する画像を選択した際にプレビュー画像を表示する。
https://gyazo.com/c10b8563c43aa04e706e781302e16101

# 9実装予定の機能
検索機能

# 10データベース設計
ER図
- usersテーブル
- reportsテーブル
- commentsテーブル  
https://gyazo.com/b7e24b079e489d915cf0926d91c32e5b

# 11ローカルでの動作方法
アプリケーションをcloneし、サーバーを立ち上げます。
```
% git clone https://github.com/seiyakawa/report-29307.git
% cd report-29307
% bundle install
% yarn install
% rails db:create
% rails db:migrate
% rails s
```
環境
- macOS Catalina10.15.6
- Ruby 2.6.5
- DB: MYSQL
- テキストエディタ: VSコード
- rails 6.0.0